!function(){"use strict";var t="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};const e=["catalan","croatian","czech","danish","dutch","english","american","finnish","french","german","greek","italian","latin","norwegian","polish","portuguese","brazilian","russian","slovene","spanish","swedish"],i={abstract:{type:"f_long_literal",biblatex:"abstract",csl:"abstract"},addendum:{type:"f_literal",biblatex:"addendum"},afterword:{type:"l_name",biblatex:"afterword"},annotation:{type:"f_long_literal",biblatex:"annotation"},annotator:{type:"l_name",biblatex:"annotator"},author:{type:"l_name",biblatex:"author",csl:"author"},bookauthor:{type:"l_name",biblatex:"bookauthor",csl:"container-author"},bookpagination:{type:"f_key",biblatex:"bookpagination",options:["page","column","section","paragraph","verse","line"]},booksubtitle:{type:"f_title",biblatex:"booksubtitle"},booktitle:{type:"f_title",biblatex:"booktitle",csl:"container-title"},booktitleaddon:{type:"f_title",biblatex:"booktitleaddon"},chapter:{type:"f_literal",biblatex:"chapter",csl:"chapter-number"},commentator:{type:"l_name",biblatex:"commentator"},date:{type:"f_date",biblatex:"date",csl:"issued"},doi:{type:"f_verbatim",biblatex:"doi",csl:"DOI"},edition:{type:"f_integer",biblatex:"edition",csl:"edition"},editor:{type:"l_name",biblatex:"editor",csl:"editor"},editora:{type:"l_name",biblatex:"editora"},editorb:{type:"l_name",biblatex:"editorb"},editorc:{type:"l_name",biblatex:"editorc"},editortype:{type:"f_key",biblatex:"editortype",options:["editor","compiler","founder","continuator","redactor","reviser","collaborator"]},editoratype:{type:"f_key",biblatex:"editoratype",options:["editor","compiler","founder","continuator","redactor","reviser","collaborator"]},editorbtype:{type:"f_key",biblatex:"editorbtype",options:["editor","compiler","founder","continuator","redactor","reviser","collaborator"]},editorctype:{type:"f_key",biblatex:"editorctype",options:["editor","compiler","founder","continuator","redactor","reviser","collaborator"]},eid:{type:"f_literal",biblatex:"eid"},entrysubtype:{type:"f_literal",biblatex:"entrysubtype"},eprint:{type:"f_verbatim",biblatex:"eprint"},eprintclass:{type:"f_literal",biblatex:"eprintclass"},eprinttype:{type:"f_literal",biblatex:"eprinttype"},eventdate:{type:"f_date",biblatex:"eventdate",csl:"event-date"},eventtitle:{type:"f_title",biblatex:"eventtitle",csl:"event"},file:{type:"f_verbatim",biblatex:"file"},foreword:{type:"l_name",biblatex:"foreword"},holder:{type:"l_name",biblatex:"holder"},howpublished:{type:"f_literal",biblatex:"howpublished",csl:"medium"},indextitle:{type:"f_literal",biblatex:"indextitle"},institution:{type:"l_literal",biblatex:"institution"},introduction:{type:"l_name",biblatex:"introduction"},isan:{type:"f_literal",biblatex:"isan",csl:"number"},isbn:{type:"f_literal",biblatex:"isbn",csl:"ISBN"},ismn:{type:"f_literal",biblatex:"ismn",csl:"number"},isrn:{type:"f_literal",biblatex:"isrn",csl:"number"},issn:{type:"f_literal",biblatex:"issn",csl:"ISSN"},issue:{type:"f_literal",biblatex:"issue",csl:"issue"},issuesubtitle:{type:"f_literal",biblatex:"issuesubtitle"},issuetitle:{type:"f_literal",biblatex:"issuetitle"},iswc:{type:"f_literal",biblatex:"iswc",csl:"number"},journalsubtitle:{type:"f_literal",biblatex:"journalsubtitle"},journaltitle:{type:"f_literal",biblatex:"journaltitle",csl:"container-title"},keywords:{type:"l_tag",biblatex:"keywords"},label:{type:"f_literal",biblatex:"label"},language:{type:"l_key",biblatex:"language",options:e},langid:{type:"f_key",strict:!0,biblatex:"langid",csl:"language",options:{acadian:{csl:"fr-CA",biblatex:"acadian"},afrikaans:{csl:"af-ZA",biblatex:"afrikaans"},arabic:{csl:"ar",biblatex:"arabic"},basque:{csl:"eu",biblatex:"basque"},bulgarian:{csl:"bg-BG",biblatex:"bulgarian"},catalan:{csl:"ca-AD",biblatex:"catalan"},chinese:{csl:"zh-CN",biblatex:"pinyin"},croatian:{csl:"hr-HR",biblatex:"croatian"},czech:{csl:"cs-CZ",biblatex:"czech"},danish:{csl:"da-DK",biblatex:"danish"},dutch:{csl:"nl-NL",biblatex:"dutch"},auenglish:{csl:"en-GB",biblatex:"australian"},caenglish:{csl:"en-US",biblatex:"canadian"},nzenglish:{csl:"en-GB",biblatex:"newzealand"},ukenglish:{csl:"en-GB",biblatex:"ukenglish"},usenglish:{csl:"en-US",biblatex:"usenglish"},estonian:{csl:"et-EE",biblatex:"estonian"},finnish:{csl:"fi-FI",biblatex:"finnish"},french:{csl:"fr-FR",biblatex:"french"},cafrench:{csl:"fr-CA",biblatex:"canadien"},german:{csl:"de-DE",biblatex:"ngerman"},atgerman:{csl:"de-AT",biblatex:"naustrian"},greek:{csl:"el-GR",biblatex:"greek"},hebrew:{csl:"he-IL",biblatex:"hebrew"},hungarian:{csl:"hu-HU",biblatex:"hungarian"},icelandic:{csl:"is-IS",biblatex:"icelandic"},italian:{csl:"it-IT",biblatex:"italian"},japanese:{csl:"ja-JP",biblatex:"japanese"},latin:{csl:"la",biblatex:"latin"},latvian:{csl:"lv-LV",biblatex:"latvian"},lithuanian:{csl:"lt-LT",biblatex:"lithuanian"},magyar:{csl:"hu-HU",biblatex:"magyar"},mongolian:{csl:"mn-MN",biblatex:"mongolian"},norwegian:{csl:"nb-NO",biblatex:"norsk"},newnorwegian:{csl:"nn-NO",biblatex:"nynorsk"},farsi:{csl:"fa-IR",biblatex:"farsi"},polish:{csl:"pl-PL",biblatex:"polish"},portuguese:{csl:"pt-PT",biblatex:"portuguese"},brportuguese:{csl:"pt-BR",biblatex:"brazilian"},romanian:{csl:"ro-RO",biblatex:"romanian"},russian:{csl:"ru-RU",biblatex:"russian"},serbian:{csl:"sr-RS",biblatex:"serbian"},cyrillicserbian:{csl:"sr-RS",biblatex:"serbianc"},slovak:{csl:"sk-SK",biblatex:"slovak"},slovene:{csl:"sl-SL",biblatex:"slovene"},spanish:{csl:"es-ES",biblatex:"spanish"},swedish:{csl:"sv-SE",biblatex:"swedish"},thai:{csl:"th-TH",biblatex:"thai"},turkish:{csl:"tr-TR",biblatex:"turkish"},ukrainian:{csl:"uk-UA",biblatex:"ukrainian"},vietnamese:{csl:"vi-VN",biblatex:"vietnamese"}}},library:{type:"f_literal",biblatex:"library"},location:{type:"l_literal",biblatex:"location",csl:"publisher-place"},mainsubtitle:{type:"f_title",biblatex:"mainsubtitle"},maintitle:{type:"f_title",biblatex:"maintitle"},maintitleaddon:{type:"f_title",biblatex:"maintitleaddon"},nameaddon:{type:"f_literal",biblatex:"nameaddon"},note:{type:"f_literal",biblatex:"note",csl:"note"},number:{type:"f_literal",biblatex:"number",csl:{"article-journal":"issue",patent:"number","*":"collection-number"}},organization:{type:"l_literal",biblatex:"organization"},origdate:{type:"f_date",biblatex:"origdate",csl:"original-date"},origlanguage:{type:"f_key",biblatex:"origlanguage",options:e},origlocation:{type:"l_literal",biblatex:"origlocation",csl:"original-publisher-place"},origpublisher:{type:"l_literal",biblatex:"origpublisher",csl:"original-publisher"},origtitle:{type:"f_title",biblatex:"origtitle",csl:"original-title"},pages:{type:"l_range",biblatex:"pages",csl:"page"},pagetotal:{type:"f_literal",biblatex:"pagetotal",csl:"number-of-pages"},pagination:{type:"f_key",biblatex:"pagination",options:["page","column","section","paragraph","verse","line"]},part:{type:"f_literal",biblatex:"part"},publisher:{type:"l_literal",biblatex:"publisher",csl:"publisher"},pubstate:{type:"f_key",biblatex:"pubstate",csl:"status",options:{inpreparation:{csl:"in preparation",biblatex:"inpreparation"},submitted:{csl:"submitted",biblatex:"submitted"},forthcoming:{csl:"forthcoming",biblatex:"forthcoming"},inpress:{csl:"in press",biblatex:"inpress"},prepublished:{csl:"prepublished",biblatex:"prepublished"}}},reprinttitle:{type:"f_literal",biblatex:"reprinttitle"},series:{type:"f_literal",biblatex:"series",csl:"collection-title"},shortauthor:{type:"l_name",biblatex:"shortauthor"},shorteditor:{type:"l_name",biblatex:"shorteditor"},shorthand:{type:"f_literal",biblatex:"shorthand"},shorthandintro:{type:"f_literal",biblatex:"shorthandintro"},shortjournal:{type:"f_literal",biblatex:"shortjournal",csl:"container-title-short"},shortseries:{type:"f_literal",biblatex:"shortseries"},shorttitle:{type:"f_literal",biblatex:"shorttitle",csl:"title-short"},subtitle:{type:"f_title",biblatex:"subtitle"},title:{type:"f_title",biblatex:"title",csl:"title"},titleaddon:{type:"f_title",biblatex:"titleaddon"},translator:{type:"l_name",biblatex:"translator",csl:"translator"},type:{type:"f_key",biblatex:"type",options:["manual","patent","report","thesis","mathesis","phdthesis","candthesis","techreport","resreport","software","datacd","audiocd"]},url:{type:"f_uri",biblatex:"url",csl:"URL"},urldate:{type:"f_date",biblatex:"urldate",csl:"accessed"},venue:{type:"f_literal",biblatex:"venue",csl:"event-place"},version:{type:"f_literal",biblatex:"version",csl:"version"},volume:{type:"f_literal",biblatex:"volume",csl:"volume"},volumes:{type:"f_literal",biblatex:"volumes",csl:"number-of-volumes"}},a={"article-journal":{order:1,biblatex:"article",csl:"article-journal",required:["journaltitle","title","author","date"],eitheror:[],optional:["abstract","addendum","annotator","commentator","doi","editor","editora","editorb","editorc","eid","eprint","eprintclass","eprinttype","issn","issue","issuesubtitle","issuetitle","journalsubtitle","language","langid","note","number","origdate","origlanguage","pages","pagination","pubstate","series","subtitle","titleaddon","translator","url","urldate","version","volume","annotation","keywords"]},"article-magazine":{order:2,biblatex:"article","biblatex-subtype":"magazine",csl:"article-magazine",required:["journaltitle","title","author","date"],eitheror:[],optional:["abstract","addendum","annotator","commentator","doi","editor","editora","editorb","editorc","eid","eprint","eprintclass","eprinttype","issn","issue","issuesubtitle","issuetitle","journalsubtitle","language","langid","note","number","origdate","origlanguage","pages","pagination","pubstate","series","subtitle","titleaddon","translator","url","urldate","version","volume","annotation","keywords"]},"article-newspaper":{order:3,biblatex:"article","biblatex-subtype":"newspaper",csl:"article-newspaper",required:["journaltitle","title","author","date"],eitheror:[],optional:["abstract","addendum","annotator","commentator","doi","editor","editora","editorb","editorc","eid","eprint","eprintclass","eprinttype","issn","issue","issuesubtitle","issuetitle","journalsubtitle","language","langid","note","number","origdate","origlanguage","pages","pagination","pubstate","series","subtitle","titleaddon","translator","url","urldate","version","volume","annotation","keywords"]},article:{order:4,biblatex:"article",csl:"article",required:["journaltitle","title","author","date"],eitheror:[],optional:["abstract","addendum","annotator","commentator","doi","editor","editora","editorb","editorc","eid","eprint","eprintclass","eprinttype","issn","issue","issuesubtitle","issuetitle","journalsubtitle","language","langid","note","number","origdate","origlanguage","pages","pagination","pubstate","series","subtitle","titleaddon","translator","url","urldate","version","volume","annotation","keywords"]},"post-weblog":{order:5,biblatex:"online",csl:"post-weblog",required:["date","title","url"],eitheror:["editor","author"],optional:["abstract","addendum","pubstate","subtitle","language","langid","urldate","titleaddon","version","note","organization","annotation","keywords"]},book:{order:10,biblatex:"book",csl:"book",required:["title","author","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","chapter","commentator","doi","edition","editor","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","origdate","origlanguage","pages","pagination","pagetotal","bookpagination","part","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volume","volumes","annotation","keywords"]},mvbook:{order:11,biblatex:"mvbook",csl:"book",required:["title","author","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","commentator","doi","edition","editor","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","note","number","origdate","origlanguage","pagetotal","bookpagination","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volumes","annotation","keywords"]},inbook:{order:12,biblatex:"inbook",csl:"chapter",required:["title","booktitle","author","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","bookauthor","booksubtitle","booktitleaddon","chapter","commentator","doi","edition","editor","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","origdate","origlanguage","pages","pagination","part","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volume","volumes","annotation","keywords"]},bookinbook:{order:13,biblatex:"bookinbook",csl:"chapter",required:["title","booktitle","author","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","bookauthor","booksubtitle","booktitleaddon","chapter","commentator","doi","edition","editor","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","origdate","origlanguage","pages","pagination","part","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volume","volumes","annotation","keywords"]},suppbook:{order:14,biblatex:"suppbook",csl:"chapter",required:["title","booktitle","author","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","bookauthor","booksubtitle","booktitleaddon","chapter","commentator","doi","edition","editor","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","origdate","origlanguage","pages","pagination","part","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volume","volumes","annotation","keywords"]},booklet:{order:15,biblatex:"booklet",csl:"pamphlet",required:["title","date"],eitheror:["editor","author"],optional:["abstract","titleaddon","addendum","pages","pagination","howpublished","type","pubstate","chapter","doi","subtitle","language","langid","location","url","urldate","pagetotal","bookpagination","note","eprint","eprintclass","eprinttype","annotation","keywords"]},collection:{order:20,biblatex:"collection",csl:"dataset",required:["editor","title","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","chapter","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","origdate","origlanguage","pages","pagination","pagetotal","bookpagination","part","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volume","volumes","annotation","keywords"]},mvcollection:{order:21,biblatex:"mvcollection",csl:"dataset",required:["editor","title","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","note","number","origdate","origlanguage","pagetotal","bookpagination","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volumes","annotation","keywords"]},incollection:{order:22,biblatex:"incollection",csl:"chapter",required:["title","editor","booktitle","author","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","booksubtitle","booktitleaddon","chapter","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","origdate","origlanguage","pages","pagination","part","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volume","volumes","annotation","keywords"]},suppcollection:{order:23,biblatex:"suppcollection",csl:"chapter",required:["title","editor","booktitle","author","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","booksubtitle","booktitleaddon","chapter","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","origdate","origlanguage","pages","pagination","part","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volume","volumes","annotation","keywords"]},post:{order:30,biblatex:"online",csl:"post",required:["date","title","url"],eitheror:["editor","author"],optional:["abstract","addendum","pubstate","subtitle","language","langid","urldate","titleaddon","version","note","organization","annotation","keywords"]},manual:{order:40,biblatex:"manual",csl:"book",required:["title","date"],eitheror:["editor","author"],optional:["abstract","addendum","chapter","doi","edition","eprint","eprintclass","eprinttype","isbn","language","langid","location","note","number","organization","pages","pagination","pagetotal","bookpagination","publisher","pubstate","series","subtitle","titleaddon","type","url","urldate","version","annotation","keywords"]},misc:{order:41,biblatex:"misc",csl:"article",required:["title","date"],eitheror:["editor","author"],optional:["abstract","addendum","howpublished","type","pubstate","organization","doi","subtitle","language","langid","location","url","urldate","titleaddon","version","note","eprint","eprintclass","eprinttype","annotation","keywords"]},online:{order:42,biblatex:"online",csl:"webpage",required:["date","title","url"],eitheror:["editor","author"],optional:["abstract","addendum","pubstate","subtitle","language","langid","urldate","titleaddon","version","note","organization","annotation","keywords"]},patent:{order:43,biblatex:"patent",csl:"patent",required:["title","number","author","date"],eitheror:[],optional:["abstract","addendum","holder","location","pubstate","doi","subtitle","titleaddon","type","url","urldate","version","note","eprint","eprintclass","eprinttype","annotation","keywords"]},periodical:{order:50,biblatex:"periodical",csl:"book",required:["editor","title","date"],eitheror:[],optional:["abstract","addendum","volume","pubstate","number","series","issn","issue","issuesubtitle","issuetitle","doi","subtitle","editora","editorb","editorc","url","urldate","language","langid","note","eprint","eprintclass","eprinttype","annotation","keywords"]},suppperiodical:{order:51,biblatex:"suppperiodical",csl:"article",required:["journaltitle","title","author","date"],eitheror:[],optional:["abstract","addendum","annotator","commentator","doi","editor","editora","editorb","editorc","eid","eprint","eprintclass","eprinttype","issn","issue","issuesubtitle","issuetitle","journalsubtitle","language","langid","note","number","origdate","origlanguage","pages","pagination","pubstate","series","subtitle","titleaddon","translator","url","urldate","version","volume","annotation","keywords"]},proceedings:{order:60,biblatex:"proceedings",csl:"book",required:["editor","title","date"],eitheror:[],optional:["abstract","addendum","chapter","doi","eprint","eprintclass","eprinttype","eventdate","eventtitle","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","organization","pages","pagination","pagetotal","bookpagination","part","publisher","pubstate","series","subtitle","titleaddon","url","urldate","venue","volume","volumes","annotation","keywords"]},mvproceedings:{order:61,biblatex:"mvproceedings",csl:"book",required:["editor","title","date"],eitheror:[],optional:["abstract","addendum","doi","eprint","eprintclass","eprinttype","eventdate","eventtitle","isbn","language","langid","location","note","number","organization","pagetotal","bookpagination","publisher","pubstate","series","subtitle","titleaddon","url","urldate","venue","volumes","annotation","keywords"]},inproceedings:{order:62,biblatex:"inproceedings",csl:"paper-conference",required:["title","editor","booktitle","author","date"],eitheror:[],optional:["abstract","addendum","booksubtitle","booktitleaddon","chapter","doi","eprint","eprintclass","eprinttype","eventdate","eventtitle","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","organization","pages","pagination","part","publisher","pubstate","series","subtitle","titleaddon","url","urldate","venue","volume","volumes","annotation","keywords"]},reference:{order:70,biblatex:"book",csl:"reference",required:["editor","title","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","chapter","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","origdate","origlanguage","pages","pagination","pagetotal","bookpagination","part","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volume","volumes","annotation","keywords"]},mvreference:{order:71,biblatex:"mvreference",csl:"book",required:["editor","title","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","note","number","origdate","origlanguage","pagetotal","bookpagination","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volumes","annotation","keywords"]},inreference:{order:72,biblatex:"inreference",csl:"entry-encyclopedia",required:["title","editor","booktitle","author","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","booksubtitle","booktitleaddon","chapter","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","origdate","origlanguage","pages","pagination","part","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volume","volumes","annotation","keywords"]},"entry-encyclopedia":{order:73,biblatex:"inreference",csl:"entry-encyclopedia",required:["title","editor","booktitle","author","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","booksubtitle","booktitleaddon","chapter","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","origdate","origlanguage","pages","pagination","part","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volume","volumes","annotation","keywords"]},"entry-dictionary":{order:74,biblatex:"inreference",csl:"entry-dictionary",required:["title","editor","booktitle","author","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","booksubtitle","booktitleaddon","chapter","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","origdate","origlanguage","pages","pagination","part","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volume","volumes","annotation","keywords"]},report:{order:80,biblatex:"report",csl:"report",required:["author","title","type","institution","date"],eitheror:[],optional:["abstract","addendum","pages","pagination","pagetotal","bookpagination","pubstate","number","isrn","chapter","doi","subtitle","language","langid","location","url","urldate","titleaddon","version","note","eprint","eprintclass","eprinttype","annotation","keywords"]},thesis:{order:81,biblatex:"thesis",csl:"thesis",required:["author","title","type","institution","date"],eitheror:[],optional:["abstract","addendum","pages","pagination","pagetotal","bookpagination","pubstate","isbn","chapter","doi","subtitle","language","langid","location","url","urldate","titleaddon","note","eprint","eprintclass","eprinttype","annotation","keywords"]},unpublished:{order:90,biblatex:"unpublished",csl:"manuscript",required:["title","author","date"],eitheror:[],optional:["abstract","addendum","howpublished","pubstate","isbn","date","subtitle","language","langid","location","url","urldate","titleaddon","note","annotation","keywords"]}};class r{constructor(t){"string"!=typeof t&&(console.warn("Wrong format for EDTFParser",t),t=""),this.string=t,this.type="None",this.valid=!0,this.values=[],this.uncertain=!1,this.approximate=!1,this.parts=[]}init(){return this.checkCertainty(),this.splitInterval(),{type:this.type,valid:this.valid,values:"Interval"===this.type?this.getPartValues():this.values,cleanedString:this.cleanString(),uncertain:this.uncertain,approximate:this.approximate}}getPartValues(){if(0===this.parts.length){return[]}if(1===this.parts.length){return this.parts[0].values}return[this.parts[0].values,this.parts[1].values]}cleanString(){let t="";return this.parts.length?t=this.parts.map((t=>t.cleanString())).join("/"):this.values&&(t=this.values.reduce(((t,e,i)=>0===i?"number"==typeof e&&e>0?String(e).padStart(4,"0"):String(e):i<3?`${t}-${String(e).padStart(2,"0")}`:3===i?`${t}T${String(e).padStart(2,"0")}`:i<6?`${t}:${String(e).padStart(2,"0")}`:`${t}${e}`),"")),this.uncertain&&(t+="?"),this.approximate&&(t+="~"),t}checkCertainty(){"~"===this.string.slice(-1)&&(this.approximate=!0,this.string=this.string.slice(0,-1)),"?"===this.string.slice(-1)&&(this.uncertain=!0,this.string=this.string.slice(0,-1))}splitInterval(){let t=this.string.split("/");if(t.length>2)this.valid=!1;else if(2===t.length){this.type="Interval";let e=!1;t.forEach((t=>{let i=new r(t);i.init(),i.valid||"Open"===i.type?(this.parts.push(i),i.valid&&(e=!0)):this.valid=!1})),e||(this.valid=!1)}else this.splitDateParts()}splitDateParts(){if(["",".."].includes(this.string))return this.valid=!1,this.values=[],void(this.type="Open");let t=this.string.replace(/^y/,"").split(/(?!^)-/);if(t.length>3)return void(this.valid=!1);let e=!0,i=t[0];if(!/^-?[0-9]*u{0,4}$/.test(i))return void(this.valid=!1);if("u"===i.slice(-1)){e=!1,this.type="Interval";let t=new r(i.replace(/u/g,"0"));t.init();let a=new r(i.replace(/u/g,"9"));a.init(),this.parts=[t,a],t.valid&&a.valid||(this.valid=!1)}else this.values=[parseInt(i)],this.type="Date";if(t.length<2)return;let a=t[1];if(!e&&"uu"!==a)return void(this.valid=!1);let o=parseInt(a.replace("uu","01"));if(!/^[0-2][0-9]|uu$/.test(a)||o<1||o>12&&o<21||o>24)return void(this.valid=!1);if("uu"===a&&(e=!1),e&&this.values.push(o),t.length<3)return void(o>12&&(this.type="Season"));if(o>12)return void(this.valid=!1);let l=t[2].split("T"),n=l[0];if(!e&&"uu"!==n)return void(this.valid=!1);let s=parseInt(n.replace("uu","01"));if(!/^[0-3][0-9]$|uu/.test(a)||s<1||s>31)return void(this.valid=!1);if("uu"===n&&(e=!1),e){let t=new Date(`${i}/${a}/${n}`);if(t.getFullYear()!==parseInt(i)||t.getMonth()+1!==o||t.getDate()!==s)return void(this.valid=!1);this.values.push(s)}if(l.length<2)return;if(!e)return void(this.valid=!1);let d=l[1].slice(0,8).split(":").map((t=>parseInt(t)));if(3!==d.length||d[0]<0||d[0]>23||d[1]<0||d[1]>59||d[2]<0||d[2]>59)return void(this.valid=!1);if(this.values=this.values.concat(d),8===l[1].length)return;let b=l[1].slice(8);if("Z"===b)return void this.values.push("Z");let u=RegExp("^[+-][0-1][0-9]:[0-1][0-9]$"),p=b.split(":").map((t=>parseInt(t)));!u.test(b)||p[0]<-11||p[0]>14||p[1]<0||p[1]>59?this.valid=!1:this.values.push(b)}}const o={strong:{open:"<b>",close:"</b>"},em:{open:"<i>",close:"</i>"},sub:{open:"<sub>",close:"</sub>"},sup:{open:"<sup>",close:"</sup>"},smallcaps:{open:'<span style="font-variant:small-caps;">',close:"</span>"},nocase:{open:'<span class="nocase">',close:"</span>"},enquote:{open:"“",close:"”"},url:{open:"",close:""},undefined:{open:"[",close:"]"}};t.CSLExporter=class{constructor(t,e=!1,i={}){this.bibDB=t,this.pks=e||Object.keys(t),this.config=i,this.cslDB={},this.errors=[]}get output(){return console.warn("CSLExporter.output will be deprecated in biblatex-csl-converter 2.x. Use CSLExporter.parse() instead."),this.parse()}parse(){for(let t in this.bibDB)-1!==this.pks.indexOf(t)&&(this.cslDB[t]=this.getCSLEntry(t),this.cslDB[t].id=t);return this.cslDB}getCSLEntry(t){let e=this.bibDB[t],r={};if(!e.fields||!e.bib_type||!a[e.bib_type])return r;for(let t in e.fields)if(""!==e.fields[t]&&t in i&&"csl"in i[t]){let a,o=e.fields[t],l=i[t].type;const n=i[t].csl;let s;switch(a="string"==typeof n?n:n[e.bib_type]?n[e.bib_type]:n["*"],l){case"f_date":s=this._reformDate(o),s&&(r[a]=s);break;case"f_integer":r[a]=this._reformInteger(o);break;case"f_key":r[a]=this._reformKey(o,t);break;case"f_literal":case"f_long_literal":r[a]=this._reformText(o);break;case"l_range":r[a]=this._reformRange(o);break;case"f_title":r[a]=this._reformText(o);break;case"f_uri":case"f_verbatim":r[a]=o;break;case"l_key":r[a]=o.map((e=>this._reformKey(e,t))).join(" and ");break;case"l_literal":r[a]=o.map((t=>this._reformText(t))).join(", ");break;case"l_name":r[a]=this._reformName(o);break;case"l_tag":r[a]=o.join(", ");break;default:console.warn(`Unrecognized field type: ${l}!`)}}return r.type=a[e.bib_type].csl,r}_reformKey(t,e){if("string"==typeof t){let a=i[e];return Array.isArray(a.options)?t:a.options[t].csl}return this._reformText(t)}_reformRange(t){return Array.isArray(t)?t.map((t=>this._reformInterval(t))).filter((t=>t.length)).join(","):(console.warn("Wrong format for range",t),"")}_reformInterval(t){return Array.isArray(t)?t.map((t=>this._reformText(t))).join("-"):(console.warn("Wrong format for interval",t),"")}_reformInteger(t){let e=this._reformText(t),i=parseInt(e);return e!==String(i)?e:i}_escapeText(t){return"string"!=typeof t?(console.warn("Wrong format for escapeText",t),""):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;")}_reformText(t){let e="",i=[];return Array.isArray(t)?(t.forEach((t=>{if("variable"===t.type)return e+=`${o.undefined.open}${t.attrs.variable}${o.undefined.close}`,void this.errors.push({type:"undefined_variable",variable:t.attrs.variable});let a=t.marks?t.marks.map((t=>t.type)):[],r=!1,l=[];i.forEach(((t,e)=>{t!=a[e]&&(r=!0),r&&l.push(o[t].close)})),l.reverse(),e+=l.join("");let n=!1;a.forEach(((t,a)=>{t!=i[a]&&(n=!0),n&&(e+=o[t].open)})),"text"in t&&(e+=this.config.escapeText?this._escapeText(t.text):t.text),i=a})),i.slice().reverse().forEach((t=>{e+=o[t].close})),e):(console.warn("Wrong format for reformText",t),e)}_reformDate(t){let e=new r(t).init();const i={};if(!e.valid)return!1;if(e.values.length>1&&Array.isArray(e.values[0])&&Array.isArray(e.values[1])){const t=e.values[0],a=e.values[1],r=[t.slice(0,3).map((t=>parseInt(t))),a.slice(0,3).map((t=>parseInt(t)))];i["date-parts"]=r}else{const t=e.values.slice(0,3).map((t=>parseInt(t)));i["date-parts"]=[t],"Interval"===e.type&&(i.circa=!0)}return(e.uncertain||e.approximate)&&(i.circa=!0),i}_reformName(t){return t.map((t=>{const e={};if(t.literal){let i=this._reformText(t.literal);if(!i.length)return!1;e.literal=i}else e.given=this._reformText(t.given),e.family=this._reformText(t.family),t.suffix&&(e.suffix=this._reformText(t.suffix)),t.prefix&&(t.useprefix?e["non-dropping-particle"]=this._reformText(t.prefix):e["dropping-particle"]=this._reformText(t.prefix)),e.family=this._reformText(t.family);return e})).filter((t=>t))}}}();
//# sourceMappingURL=export-csl.js.map
